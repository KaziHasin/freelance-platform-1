import{u as S,g as T,j as e}from"./index-BzeirQbh.js";import{P as D}from"./PageLayout-BXdVDYeO.js";import{B as o}from"./Button-DAaJg7TO.js";import{u as A,a as p}from"./index.esm-ROoT7fyu.js";import{F as R,C as h,T as I,a as j}from"./CheckboxInput-bHa850mr.js";import{T as l}from"./TextInput-zMPiYgPU.js";import{S as z}from"./SelectBox-CUC6YG9y.js";import{F as g}from"./PlusIcon-RDI3_RYo.js";const G=()=>{const d=S(),[b,{isLoading:f}]=T(),{register:t,handleSubmit:v,control:m,formState:{errors:r},watch:u,setError:P}=A({defaultValues:{pricePairs:[{currency:"",amount:0}],features:[{value:""}]}}),{fields:N,append:k,remove:y}=p({control:m,name:"pricePairs"}),{fields:C,append:w,remove:E}=p({control:m,name:"features"}),F=async s=>{var a;try{const i={};s.pricePairs.forEach(c=>{c.currency&&c.amount>=0&&(i[c.currency.toUpperCase()]=Number(c.amount))});const x=(s.features||[]).map(c=>c.value),n={code:s.code,prices:i,projectsPerMonth:s.unlimitedProjects?null:Number(s.projectsPerMonth),contactClicksPerProject:s.unlimitedClicks?null:Number(s.contactClicksPerProject),notes:s.notes,shortDescription:s.shortDescription,footerText:s.footerText,badge:s.badge,features:x};await b(n).unwrap(),d("/admin/packages",{state:"created"})}catch(i){(a=i==null?void 0:i.data)!=null&&a.details&&i.data.details.forEach(n=>{const c=n.field.replace(/^body\./,"");P(c,{type:"server",message:n.message})})}},M=[{label:"Manage Packages",path:"/packages"},{label:"Create Package",path:"/packages/create"}];return e.jsx(D,{title:"Create Package",breadcrumbs:M,children:e.jsx("form",{onSubmit:v(F),children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 mb-6 shadow-md border border-gray-100 dark:border-gray-700",children:[e.jsx(R,{title:"Package Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(z,{label:"Code",required:!0,...t("code"),options:[{label:"FREE",value:"FREE"},{label:"BASIC",value:"BASIC"},{label:"STANDARD",value:"STANDARD"},{label:"PREMIUM",value:"PREMIUM"}]}),r.code&&e.jsx("span",{className:"text-sm text-red-500",children:r.code.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Projects Per Month"}),e.jsx(h,{label:"Unlimited Projects",...t("unlimitedProjects")})]}),!u("unlimitedProjects")&&e.jsx(l,{placeholder:"Enter Projects Per Month",...t("projectsPerMonth")}),r.projectsPerMonth&&e.jsx("span",{className:"text-sm text-red-500",children:r.projectsPerMonth.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Contact Clicks Per Project"}),e.jsx(h,{label:"Unlimited Projects",...t("unlimitedClicks")})]}),!u("unlimitedClicks")&&e.jsx(l,{placeholder:"Enter Contact Clicks Per Project",...t("contactClicksPerProject")}),r.contactClicksPerProject&&e.jsx("span",{className:"text-sm text-red-500",children:r.contactClicksPerProject.message})]}),e.jsxs("div",{children:[e.jsx(l,{label:"Short Description",placeholder:"Enter short description",required:!0,...t("shortDescription")}),r.shortDescription&&e.jsx("span",{className:"text-sm text-red-500",children:r.shortDescription.message})]}),e.jsxs("div",{children:[e.jsx(l,{label:"Footer Text",placeholder:"Enter footer text",required:!0,...t("footerText")}),r.footerText&&e.jsx("span",{className:"text-sm text-red-500",children:r.footerText.message})]}),e.jsxs("div",{children:[e.jsx(l,{label:"Badge",placeholder:"Enter badge text",...t("badge")}),r.badge&&e.jsx("span",{className:"text-sm text-red-500",children:r.badge.message})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(I,{label:"Notes",name:"notes",placeholder:"Enter additional details...",rows:4,...t("notes")})}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Features"}),e.jsx(o,{type:"button",variant:"primary",onClick:()=>w({value:""}),size:"sm",children:e.jsx(g,{className:"w-4 h-4 text-white"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map((s,a)=>e.jsxs("div",{className:"relative border rounded-lg shadow-sm bg-white dark:bg-gray-800 p-4",children:[e.jsx("div",{className:"absolute -top-2 -right-2 flex gap-1",children:a>0&&e.jsx(o,{type:"button",variant:"danger",className:"z-10",size:"sm",onClick:()=>E(a),children:e.jsx(j,{className:"w-3 h-3 text-white"})})}),e.jsx(l,{placeholder:`Feature ${a+1}`,...t(`features.${a}.value`),className:"w-full"})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Prices"}),e.jsx(o,{type:"button",variant:"primary",onClick:()=>k({currency:"",amount:0}),size:"sm",children:e.jsx(g,{className:"w-4 h-4 text-white"})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map((s,a)=>e.jsxs("div",{className:"relative border  rounded-lg shadow-sm bg-white dark:bg-gray-800 p-4",children:[e.jsx("div",{className:"absolute -top-2 -right-2 flex gap-1",children:a>0&&e.jsx(o,{type:"button",variant:"danger",className:"z-10",size:"sm",onClick:()=>y(a),children:e.jsx(j,{className:"w-3 h-3 text-white"})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{placeholder:"Currency (e.g. USD)",className:"w-28",...t(`pricePairs.${a}.currency`,{pattern:{value:/^[A-Z]{1,5}$/,message:"Must be 1 to 5 uppercase letters"}})}),e.jsx(l,{placeholder:"Amount",...t(`pricePairs.${a}.amount`,{min:{value:0,message:"Must be â‰¥ 0"}})})]})]},s.id))})]})]})]}),e.jsxs("div",{className:"pt-6 flex justify-end",children:[e.jsx(o,{variant:"danger",className:"mr-2",type:"button",onClick:()=>d("/admin/packages"),children:"Cancel"}),e.jsx(o,{type:"submit",children:f?"Submitting...":"Submit"})]})]})})})};export{G as default};
