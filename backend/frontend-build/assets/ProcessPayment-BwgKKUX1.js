import{u,b as g,O as h,j as e,Q as y}from"./index-BzeirQbh.js";import{T as n}from"./TextInput-zMPiYgPU.js";import{u as v}from"./index.esm-ROoT7fyu.js";import{B as j}from"./Button-DAaJg7TO.js";const w=()=>{var l;const i=u(),a=(l=g().state)==null?void 0:l.paymentMethod,c={INR:"₹",USD:"$",EUR:"€"},[d,{isLoading:m}]=h(),{register:r,handleSubmit:o,formState:{errors:t}}=v(),x=async p=>{try{const s=await d({paymentMethod:a.type,planInterval:a.planInterval,amount:a.amount,currency:a.currency,clientId:y().id,packageId:a.id,packageTitle:a.packageTitle,paymentDetails:p}).unwrap();if(s.status==="success")i("/client/payment-result",{state:{paymentResult:{status:"success",transactionId:s.transactionId,amount:a.amount,packageTitle:a.packageTitle,planInterval:a.planInterval}}});else throw new Error(s.message||"Payment failed")}catch(s){i("/client/payment-result",{state:{paymentResult:{status:"failure",message:s instanceof Error?s.message:"Payment processing failed",amount:a.amount,packageTitle:a.packageTitle,planInterval:a.planInterval}}})}};return a?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-white",children:"Complete Your Payment"}),e.jsxs("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-300",children:["Secure payment processing for your ",a.packageTitle]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-green-600 dark:bg-green-700 px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold",children:[c[a.currency],a.amount]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Plan Type"}),e.jsx("p",{className:"font-semibold capitalize",children:a.planInterval})]})]})}),e.jsxs("form",{onSubmit:o(x),className:"px-6 py-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{label:"Card Number",id:"cardNumber",placeholder:"1234 5678 9012 3456",maxLength:19,...r("cardNumber",{required:"Card number is required",pattern:{value:/^\d{4}\s\d{4}\s\d{4}\s\d{4}$/,message:"Enter a valid card number"}})}),t.cardNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cardNumber.message})]}),e.jsxs("div",{children:[e.jsx(n,{label:"Name on Card",id:"name",placeholder:"John Doe",...r("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{label:"Expiry Date",id:"expiryDate",placeholder:"MM/YY",maxLength:5,...r("expiryDate",{required:"Expiry date is required",pattern:{value:/^(0[1-9]|1[0-2])\/\d{2}$/,message:"Enter a valid expiry date (MM/YY)"}})}),t.expiryDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.expiryDate.message})]}),e.jsxs("div",{children:[e.jsx(n,{label:"CVV",id:"cvv",placeholder:"123",maxLength:4,...r("cvv",{required:"CVV is required",pattern:{value:/^[0-9]{3,4}$/,message:"Enter a valid CVV"}})}),t.cvv&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.cvv.message})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(j,{variant:"success",size:"lg",isLoading:m,fullWidth:!0,type:"submit",children:" Pay Now"})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:"No payment information found. Please select a plan first."})})};export{w as default};
